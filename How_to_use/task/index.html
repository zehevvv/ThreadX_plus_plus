<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Task (Thread) - ThreadX++</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Task (Thread)";
        var mkdocs_page_input_path = "How_to_use\\task.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> ThreadX++
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../home/">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Install</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Install/install_st/">Install ThreadX on ST</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Install/add_threadx_plus_plus/">Add ThreadX++</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">How to use</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../introduction/">Introduction</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Task (Thread)</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#create-task">Create Task</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#run-code-by-task">Run code by task</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#polling">Polling</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#get-message">Get message</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../events/">Events</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../time_events/">Timer events</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Add STM32 API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Add_stm32_api/config_printf/">Config printf</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/">About</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">ThreadX++</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>How to use &raquo;</li>
      <li>Task (Thread)</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="task">Task</h1>
<h2 id="introduction">Introduction</h2>
<p>In ThreadX++ the <code>thread</code> are <code>task</code>, so when you create task you actually create thread of ThreadX, in this page i am only explain the basic of use and functionality, in more specific in this page we learn how to use them "polling oriented", for "event oriented" you can look on the pages <a href="../events/">Events</a> and <a href="../time_events/">Time events</a></p>
<h2 id="create-task">Create Task</h2>
<p>In this example we will create LedTask that blink the led every 1 second.</p>
<p>1) Add the include </p>
<pre><code>#include &quot;Task.h&quot;
</code></pre>
<p>2) Create a class that inherits from a Task class:</p>
<pre><code>class LedTask : public Task
</code></pre>
<p>3) In the implementation of the constructor you will need to call to constructor of the Task class and enter 3 parameter:<br />
<strong>name:</strong> The name of the task.<br />
<strong>priority:</strong> The priority of the task.<br />
<strong>stack size:</strong> The size of the stack of the task.<br />
In the next example we will create task with priority <strong>10</strong> and stack size <strong>1024</strong>:</p>
<pre><code>LedTask::LedTask() : Task(&quot;LedTask&quot;, 10, 1024) { }
</code></pre>
<h2 id="run-code-by-task">Run code by task</h2>
<p>We have 4 way to run code from the created task:<br />
1. <strong>Polling:</strong> function that have endless loop (<code>while(1){}</code>).<br />
2. <strong>Get message:</strong> a message that send by other thread can invoke the current thread to run specific function.<br />
3. <strong>Event:</strong> Current thread can register to event, and when the event invoke the thread will run some code.<br />
4. <strong>Time event:</strong> Event that invoke task after specific amount of time.  </p>
<h3 id="polling">Polling</h3>
<p>Every task have it's own "main loop", this is a function that have endless loop (<code>while(1){}</code>), in class <strong>Task</strong> you have internal function that call <code>Main_loop()</code>, this function run the endless loop:   </p>
<pre><code>void Task::Main_loop()
{
    while(1)
    {
        WaitForNewMessage();
    }
}
</code></pre>
<p>If you want you can override this function by your class that inherited <strong>Task</strong> class,<br />
<strong>Important note:</strong> If you override, you must call to function <code>WaitForNewMessage()</code>, if you don't call it -&gt; other thread can't send your thread messages, also all the events and time events will not invoke your task, the function <code>WaitForNewMessage()</code> can get parameter of timeout at milliseconds, so every time you want to sleep you can call this function with the time you want to sleep, you can see it in the next example:<br />
Example: in the next example the class ledTask will toggle the led every 500ms:</p>
<pre><code>void LedTask::Main_loop() 
{
    while(1)
    {
        ToggleLed();    
        WaitForNewMessage(500);
    }
}
</code></pre>
<h3 id="get-message">Get message</h3>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../introduction/" class="btn btn-neutral float-left" title="Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../events/" class="btn btn-neutral float-right" title="Events">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../introduction/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../events/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
