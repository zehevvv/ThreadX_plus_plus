<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Config printf - ThreadX++</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Config printf";
        var mkdocs_page_input_path = "Add_stm32_api\\config_printf.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> ThreadX++
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Install</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Install/install_st/">Install ThreadX on ST</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Install/add_threadx_plus_plus/">Add ThreadX++</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">How to use</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../How_to_use/introduction/">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../How_to_use/task/">Task (Thread)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../How_to_use/threadx_api/">ThreadX API (Mutex, Semaphore, Queue)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../How_to_use/memory_manager/">Memory manager</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Add STM32 API</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Config printf</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#introduction">introduction</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#key-features">Key features:</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#config">Config</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../watchdog/">Watchdog</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../registry/">Registry</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../measure_time/">Measure time</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/">About</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">ThreadX++</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Add STM32 API &raquo;</li>
      <li>Config printf</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="config-printf">Config printf</h1>
<h2 id="introduction">introduction</h2>
<p>The normal debug print is run over the UART of the debugger, if you want you also can send them over the SWV, the SWV is part of the debugger and it enables several features, one of them being the <code>port</code>, it is a line that you can send data over, in this tutorial, you will learn how to config the <code>printf</code> to connect to <code>port 0</code>.  </p>
<h2 id="key-features">Key features:</h2>
<ul>
<li><strong>Speed:</strong> It's much quicker than the UART, (the default UART is 128kb, and the SWV is most of the time the same speed as the system clock). </li>
<li><strong>Not need UART:</strong> If you use the SWV, you can use the UART for other tasks.  </li>
<li><strong>Cube integration:</strong> Cube IDE is based on Eclipse, Eclipse has view control for the <code>ports</code> feature of the SWV.</li>
</ul>
<h2 id="config">Config</h2>
<ol>
<li>In the file <code>Core/Src/main.c</code> insert the next code</li>
</ol>
<pre><code>#ifdef __GNUC__
#define PUTCHAR_PROTOTYPE int __io_putchar(int ch)
#else
#define PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)
#endif

PUTCHAR_PROTOTYPE
{
//  HAL_UART_Transmit(&amp;huart3, (uint8_t *)&amp;ch, 1, HAL_MAX_DELAY);
  ITM_SendChar(ch);
  return ch;
}
</code></pre>
<p>after the <code>SystemClock_Config</code> function call <img alt="" src="../../img/Config_printf/Add_function.png" /><br />
2. Build the project by press on <code>Ctrl</code> + <code>b</code>.<br />
3. Go to <code>Run-&gt;Debug Configuration</code>, and a new window opens, in the window double click on <code>STM32 C/C++ Application</code>, than go to tab <code>Debugger</code>, and in the frame <code>Serial Wire Viewer (SWv)</code> you will find the check box <code>Enable</code>, set it <img alt="" src="../../img/Config_printf/Enable_swv.png" /><br />
4. Run the debugger and make him stop on a breakpoint, then go to <code>Window-&gt;Show View-&gt;Other</code>, in the window that opens search <code>SWV ITM Data Console</code>, this will add a new view to your screen <code>SWV ITM Data Console</code>, in this view press on the settings button <img alt="" src="../../img/Config_printf/open_setting.png" />  New window will open, in the bottom you see the frame <code>ITM Stimulus Ports</code>, you need to set the right checkbox that is near the <code>0</code> and press <code>OK</code> <img alt="" src="../../img/Config_printf/Enable_port.png" />
5. in the view <code>SWV ITM Data Console</code> press on the <code>start trace</code> button (it looks like the red or gray ball)  <img alt="" src="../../img/Config_printf/Start_trace.png" />  </p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../How_to_use/memory_manager/" class="btn btn-neutral float-left" title="Memory manager"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../watchdog/" class="btn btn-neutral float-right" title="Watchdog">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../How_to_use/memory_manager/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../watchdog/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
